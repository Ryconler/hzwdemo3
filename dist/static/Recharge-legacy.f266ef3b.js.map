{"version":3,"file":"Recharge-legacy.f266ef3b.js","sources":["../../src/api/user.ts","../../src/api/childCard.ts","../../src/store/childCard.ts","../../src/views/recharge/components/RechargeCard.vue","../../src/constants/childCard.ts","../../src/views/recharge/components/RechargeDetailSkuList.vue","../../src/views/recharge/components/RechargeDetailSkuInfo.vue","../../src/api/shareKey.ts","../../src/views/recharge/components/RechargeDetail.vue","../../src/views/recharge/components/RechargeStore.vue","../../src/views/recharge/components/RechargeImgtxt.vue","../../src/views/recharge/components/RechargeAction.vue","../../src/views/recharge/Recharge.vue"],"sourcesContent":["import queryString from 'query-string'\nimport urlPrefixes from '@/constants/urlPrefixes'\nimport { ajax, cookies } from '@/utils'\nimport { ResultType } from '@/types/http'\nimport { UserInfoType } from '@/types/user'\n\nconst api = {\n  queryUserInfo: `${urlPrefixes.userapi}/user/GetUserInfo`\n}\n\n/* 查询登录用户信息 */\nexport async function queryUserInfo() {\n  const query = queryString.stringify({\n    uid: cookies.get('uid'),\n    skey: cookies.get('skey')\n  })\n  const result: ResultType<UserInfoType> = await ajax.get(\n    `${api.queryUserInfo}?${query}`\n  )\n  const { errno, data } = result\n  if (errno == 0) {\n    return data || null\n  } else {\n    throw result\n  }\n}\n","import urlPrefixes from '@/constants/urlPrefixes'\nimport { ajax } from '@/utils'\nimport { ChildCardSkuConsumeType, ChildCardType } from '@/types/childCard'\nimport { ResultType } from '@/types/http'\nimport queryString from 'query-string'\n\nconst api = {\n  queryChildCardDetail: `${urlPrefixes.ccardapi}/ccard-api/api/spu/queryCmmdtyDetail.do`,\n  querySingleConsumeItem: `${urlPrefixes.ccardapi}/ccard-api/api/spu/querySingleConsumeItem.do`\n}\n\n/* 童玩卡详情 */\nexport async function queryChildCardDetail(storeCode: string, skuId?: string) {\n  const query = queryString.stringify({\n    storeCode,\n    skuId\n  })\n  const result: ResultType<ChildCardType> = await ajax.get(\n    `${api.queryChildCardDetail}?${query}`\n  )\n  const { data, code } = result\n  if (code == '1') {\n    return data || null\n  } else {\n    throw result\n  }\n}\n\n/* 童玩卡详情 */\nexport async function queryChildCardConsumeInfo(\n  storeCode: string,\n  skuId: number\n) {\n  const query = queryString.stringify({\n    storeCode,\n    skuId\n  })\n  const result: ResultType<ChildCardSkuConsumeType> = await ajax.get(\n    `${api.querySingleConsumeItem}?${query}`\n  )\n  const { data, code } = result\n  if (code == '1') {\n    return data || null\n  } else {\n    throw result\n  }\n}\n","import { ChildCardSkuConsumeType, ChildCardSkuType } from './../types/childCard'\nimport { Toast } from 'vant'\nimport {\n  queryChildCardConsumeInfo,\n  queryChildCardDetail\n} from '@/api/childCard'\nimport { defaultCity, getSelectedCity } from '@/utils'\nimport { StoreDetailType, StoreType } from '@/types/store'\nimport { defineStore } from 'pinia'\nimport { ChildCardType } from '@/types/childCard'\nimport { useMainStore } from '.'\nimport { queryStoreList } from '@/api/store'\n\ntype StateType = {\n  childCardDetail: ChildCardType | null\n  activeSkuId: number | undefined\n  activedSkuConsumeInfo: ChildCardSkuConsumeType | null\n  storeInfo: StoreType\n}\ntype GettersType = {\n  activedSku: (state: StateType) => ChildCardSkuType | undefined\n  activedSkuCoinGiftDetail: (state: StateType) => string\n  activedSkuReturnCoupons: (state: StateType) => any\n  activedSkuReturnCoins: (state: StateType) => any\n}\ntype ActionsType = {\n  initChildCardDetail: () => void\n  setChildCardDetail: () => void\n  setActivedSkuConsumeInfo: () => void\n}\n\nexport const useChildCardStore = defineStore<\n  string,\n  StateType,\n  GettersType,\n  ActionsType\n>('childCard', {\n  state: () => {\n    return {\n      childCardDetail: null,\n      activeSkuId: undefined,\n      activedSkuConsumeInfo: null,\n      storeInfo: {\n        storeCode: '',\n        storeName: ''\n      }\n    }\n  },\n  getters: {\n    activedSku(state) {\n      return state.childCardDetail?.skuList.find(\n        item => item.skuId == state.activeSkuId\n      )\n    },\n    activedSkuCoinGiftDetail(state) {\n      let coinGiftDetail = ''\n      coinGiftDetail += this.activedSku?.giveAmount\n        ? `+赠送${this.activedSku.giveAmount / 100}`\n        : ''\n      coinGiftDetail += this.activedSku?.returnCoinNum\n        ? `+核销返${this.activedSku.returnCoinNum / 100}`\n        : ''\n      return coinGiftDetail\n    },\n    activedSkuReturnCoupons(state) {\n      return state.activedSkuConsumeInfo?.returnCouponInfo\n        ? JSON.parse(state.activedSkuConsumeInfo.returnCouponInfo)\n        : []\n    },\n    activedSkuReturnCoins(state) {\n      return state.activedSkuConsumeInfo?.returnCoinsInfo\n    }\n  },\n  actions: {\n    async initChildCardDetail() {\n      const mainStore = useMainStore()\n      const cookieCityInfo = (await getSelectedCity()) || defaultCity\n      /* 查询最近的商品信息 */\n      const queryNearestChildCard = async () => {\n        // 当前城市取url城市或定位或cookie\n        const cityId =\n          <string>mainStore.$route?.query.cityId ||\n          mainStore.position?.cityId ||\n          cookieCityInfo.cityId\n        // 当前城市最近的有商品的门店\n        let nearStoreInfos: StoreDetailType[] = []\n        try {\n          nearStoreInfos = await queryStoreList(\n            cityId,\n            mainStore.position?.lng,\n            mainStore.position?.lat\n          )\n        } catch (error) {\n          console.error(error)\n        }\n        if (nearStoreInfos.length == 0) {\n          // 当前城市无有商品的门店，跳转门店列表页\n          mainStore.$router?.replace({\n            name: 'storeList',\n            query: {\n              citycode: cityId\n            }\n          })\n        } else {\n          try {\n            this.childCardDetail = await queryChildCardDetail(\n              nearStoreInfos[0].store_code,\n              <string>mainStore.$route?.query.skuId ||\n                <string>mainStore.$route?.query.filterId\n            )\n          } catch (error: any) {\n            console.error(error)\n            Toast(error?.msg || '网络错误')\n          }\n        }\n      }\n\n      if (mainStore.$route?.query.storeCode) {\n        // 优先查询url门店的商品\n        try {\n          this.childCardDetail = await queryChildCardDetail(\n            <string>mainStore.$route?.query.storeCode,\n            <string>mainStore.$route?.query.skuId ||\n              <string>mainStore.$route?.query.filterId\n          )\n        } catch (error: any) {\n          console.error(error)\n          if (error.code != '12') {\n            Toast(error?.msg || '网络错误')\n            return\n          }\n        }\n        if (this.childCardDetail) {\n          // url门店查到了商品\n        } else {\n          // url门店没有查到商品，查询最近门店商品\n          await queryNearestChildCard()\n          if (this.childCardDetail) {\n            Toast('当前门店暂无在售的充值卡，已为您切换至最近的门店')\n          }\n        }\n      } else {\n        // url无门店查询最近门店商品\n        await queryNearestChildCard()\n      }\n    },\n    async setChildCardDetail() {\n      const mainStore = useMainStore()\n      try {\n        this.childCardDetail = await queryChildCardDetail(\n          this.storeInfo.storeCode,\n          <string>mainStore.$route?.query.skuId ||\n            <string>mainStore.$route?.query.filterId\n        )\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    async setActivedSkuConsumeInfo() {\n      if (this.activeSkuId && this.storeInfo.storeCode) {\n        try {\n          this.activedSkuConsumeInfo = await queryChildCardConsumeInfo(\n            this.storeInfo.storeCode,\n            this.activeSkuId\n          )\n        } catch (error) {\n          console.error(error)\n        }\n      }\n    }\n  }\n})\n","<template>\n  <div class=\"card\">\n    <h1 class=\"card-title pf-simbold\">\n      {{ childCardDetail?.spu.spuName }}\n    </h1>\n    <div class=\"account-text\">充值账号</div>\n    <div class=\"account-number pf-simbold\">\n      {{ maskTel(userInfo?.mobile) }}\n    </div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { useMainStore } from '@/store'\nimport { useChildCardStore } from '@/store/childCard'\nimport { maskTel } from '@/utils'\nimport { storeToRefs } from 'pinia'\n\nconst mainStore = useMainStore()\nconst childCardStore = useChildCardStore()\nconst { userInfo } = storeToRefs(mainStore)\nconst { childCardDetail } = storeToRefs(childCardStore)\n</script>\n<style lang=\"scss\" scoped>\n.card {\n  height: 178px;\n  background: url(@/assets/images/recharge/bg-card.png) 0 0/100% 100% no-repeat;\n  padding: 0 20px;\n  margin: 0 16px 15.5px;\n  overflow: hidden;\n  .card-title {\n    margin-top: 30px;\n    color: #ffffff;\n    font-size: 22px;\n    line-height: 25px;\n    @include ellicpsis;\n  }\n  .account-text {\n    margin-top: 21px;\n    color: #ffdbdb;\n    font-size: 14px;\n    line-height: 20px;\n  }\n  .account-number {\n    margin-top: 2px;\n    color: #ffffff;\n    font-size: 16px;\n    line-height: 22.5px;\n  }\n}\n</style>\n","export enum MEMBER_TYPE {\n  NORMAL, //待支付\n  HZW_NEW_MEMBER, //孩子王新客\n  BLACK_GOLD, //黑金会员\n  CHILD_MEMBER //童乐园新客\n}\n","<template>\n  <ul\n    v-if=\"childCardDetail?.skuList && childCardDetail.skuList.length > 0\"\n    class=\"recharge-options\"\n  >\n    <li\n      v-for=\"item in childCardDetail.skuList.slice(\n        0,\n        childCardDetail.skuList.length <= 6 || skuAllShowed ? undefined : 5\n      )\"\n      :key=\"item.skuId\"\n      class=\"recharge-option\"\n      :class=\"item.skuId == activeSkuId && 'active'\"\n      @click=\"skuClick(item)\"\n    >\n      <p\n        v-if=\"\n          getPromotionTitle(\n            item.userLimit,\n            item.returnCoinNum,\n            item.returnCouponInfo\n          )\n        \"\n        class=\"tag\"\n        :class=\"item.userLimit === MEMBER_TYPE.BLACK_GOLD ? 'black-gold' : ''\"\n      >\n        <span>{{\n          getPromotionTitle(\n            item.userLimit,\n            item.returnCoinNum,\n            item.returnCouponInfo\n          )\n        }}</span>\n      </p>\n      <span class=\"money pf-simbold\">{{ getYenPrice(item.price) }}元</span>\n      <span class=\"coin\"\n        >到账{{\n          item.rechargeAmount / 100 +\n          item.giveAmount / 100 +\n          item.returnCoinNum / 100\n        }}币</span\n      >\n    </li>\n    <li\n      v-if=\"childCardDetail.skuList.length > 6 && !skuAllShowed\"\n      class=\"recharge-option more\"\n      @click=\"skuAllShowed = true\"\n    >\n      <span>更多</span>\n      <span>充值金额</span>\n    </li>\n  </ul>\n</template>\n<script lang=\"ts\" setup>\nimport { MEMBER_TYPE } from '@/constants/childCard'\nimport { useChildCardStore } from '@/store/childCard'\nimport { ChildCardSkuType } from '@/types/childCard'\nimport { getYenPrice } from '@/utils'\nimport { storeToRefs } from 'pinia'\nimport { ref } from 'vue'\n\nconst childCardStore = useChildCardStore()\nconst { childCardDetail, activeSkuId } = storeToRefs(childCardStore)\nconst skuAllShowed = ref(false)\nconst getPromotionTitle = (\n  type: number,\n  returnCoinNum: number,\n  returnCouponInfo: any\n) => {\n  if (type === MEMBER_TYPE.BLACK_GOLD) {\n    return '黑金专享'\n  } else if (type === MEMBER_TYPE.HZW_NEW_MEMBER) {\n    return 'demo新客专享'\n  } else if (type === MEMBER_TYPE.CHILD_MEMBER) {\n    return '童乐园新客专享'\n  } else if (type === MEMBER_TYPE.NORMAL && returnCoinNum > 0) {\n    return `到店核销返${returnCoinNum / 100}币`\n  } else if (returnCouponInfo) {\n    return '充值返券'\n  }\n  return ''\n}\nconst skuClick = async (sku: ChildCardSkuType) => {\n  activeSkuId.value = sku.skuId\n  childCardStore.setChildCardDetail()\n  childCardStore.setActivedSkuConsumeInfo()\n}\n</script>\n<style lang=\"scss\" scoped>\n.recharge-options {\n  display: flex;\n  flex-wrap: wrap;\n  margin: 0 0 12px;\n  .recharge-option {\n    flex: none;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 31.3%;\n    height: 66px;\n    background: #ffffff;\n    margin-right: 3.05%;\n    margin-bottom: 12px;\n    border: 1px solid #eaeaea;\n    border-radius: 6px;\n    // @include border(all, #eaeaea, 1px, 6px);\n    &:nth-child(3n) {\n      margin-right: 0;\n    }\n    &:nth-last-child(1),\n    &:nth-last-child(2),\n    &:nth-last-child(3) {\n      margin-bottom: 0;\n    }\n    .tag {\n      position: absolute;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      left: -1px;\n      top: -5px;\n      padding: 0 6px;\n      height: 14px;\n      max-width: 100%;\n      background-color: #ff397e;\n      border-radius: 7px 7px 7px 0;\n      z-index: 1;\n      span {\n        line-height: normal;\n        color: #ffffff;\n        font-size: 10px;\n        @include ellicpsis;\n      }\n      &.black-gold {\n        background: linear-gradient(270deg, #443f3f 0%, #624e4e 100%);\n        span {\n          color: #fad6b1;\n        }\n      }\n    }\n    .money {\n      font-size: 16px;\n      line-height: 20px;\n      margin-bottom: 3px;\n      color: #262626;\n    }\n    .coin {\n      line-height: 15px;\n      font-size: 12px;\n      color: #bababa;\n    }\n    &.active {\n      background: #fff7fb;\n      border: 1px solid #ff397e;\n      // @include border(all, #ff397e, 1px, 6px);\n      .money {\n        color: #ff397e;\n      }\n      .coin {\n        color: #ff397e;\n      }\n    }\n    &.more {\n      line-height: 20px;\n      color: #262626;\n      font-size: 14px;\n    }\n  }\n}\n</style>\n","<template>\n  <div v-if=\"activedSku\" class=\"recharge-detail\">\n    <div class=\"recharge-detail-title\">\n      <i></i>\n      <h3>充值详情</h3>\n      <div class=\"store-selector\" @click=\"storeClick\">\n        <span>{{ storeInfo.storeName }}</span>\n        <i></i>\n      </div>\n    </div>\n    <div class=\"coin-detail\">\n      {{ getYenPrice(activedSku.price) }}元={{\n        activedSku.rechargeAmount / 100 +\n        activedSku.giveAmount / 100 +\n        activedSku.returnCoinNum / 100\n      }}币{{\n        activedSkuCoinGiftDetail &&\n        `（含充值${\n          activedSku.rechargeAmount / 100\n        }${activedSkuCoinGiftDetail}）`\n      }}\n    </div>\n    <div\n      v-if=\"\n        activedSkuConsumeInfo?.singleConsumeItems &&\n        activedSkuConsumeInfo.singleConsumeItems.length > 0\n      \"\n      class=\"consume-info\"\n    >\n      <div class=\"consume-info-title\">\n        <p class=\"title\">游玩1次消费币值：</p>\n      </div>\n      <ul class=\"consume-items\">\n        <li\n          v-for=\"(item, index) in activedSkuConsumeInfo.singleConsumeItems\"\n          :key=\"index\"\n          class=\"consume-item\"\n        >\n          {{ item.projectName }}：{{ item.writeOffMoney }}币<em\n            >（约{{ item.consumeCoin }}元/次）</em\n          >\n        </li>\n      </ul>\n    </div>\n    <div\n      v-if=\"activedSkuReturnCoupons.length > 0 || activedSkuReturnCoins\"\n      class=\"promotions\"\n    >\n      <div class=\"promotion-labels\">\n        <template v-if=\"activedSkuReturnCoupons.length > 0\">\n          <div class=\"promotion-label\">\n            <span>充值返券</span>\n          </div>\n        </template>\n        <template v-if=\"activedSkuReturnCoins\">\n          <div class=\"promotion-label\">\n            <span>核销返币</span>\n          </div>\n        </template>\n      </div>\n      <button\n        class=\"promotion-button\"\n        @click=\"promotionPopupShow = true\"\n      ></button>\n\n      <PromotionPopup\n        v-model=\"promotionPopupShow\"\n        :return-coupons=\"activedSkuReturnCoupons\"\n        :return-coins=\"activedSkuReturnCoins\"\n      ></PromotionPopup>\n    </div>\n    <p v-if=\"activedSku.skuLights\" class=\"desc\">\n      {{ activedSku.skuLights }}\n    </p>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { useMainStore } from '@/store'\nimport { useChildCardStore } from '@/store/childCard'\nimport { getYenPrice } from '@/utils'\nimport { storeToRefs } from 'pinia'\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst router = useRouter()\nconst mainStore = useMainStore()\nconst childCardStore = useChildCardStore()\nconst { cityInfo } = storeToRefs(mainStore)\nconst {\n  storeInfo,\n  activedSku,\n  activedSkuConsumeInfo,\n  activedSkuCoinGiftDetail,\n  activedSkuReturnCoupons,\n  activedSkuReturnCoins\n} = storeToRefs(childCardStore)\n\nconst promotionPopupShow = ref(false)\n\nconst storeClick = () => {\n  router.push({\n    name: 'storeList',\n    query: {\n      citycode: cityInfo.value.cityId,\n      cityname: cityInfo.value.cityName\n    }\n  })\n}\n</script>\n<style lang=\"scss\" scoped>\n.recharge-detail {\n  padding: 12px;\n  border-radius: 10px;\n  background: #fff3f7;\n  & > *:last-child {\n    margin-bottom: 0 !important;\n  }\n  .recharge-detail-title {\n    display: flex;\n    align-items: center;\n    margin: 0 0 12px;\n    i {\n      flex: none;\n      display: inline-block;\n      width: 15px;\n      height: 16px;\n      background: url(https://hzwimspic-1251601690.image.myqcloud.com/92f90b80-90c7-11ed-9682-3d9e57f0f720_size_60x64)\n        0 0/100% 100% no-repeat;\n    }\n    h3 {\n      flex: none;\n      display: inline-block;\n      line-height: 17px;\n      color: #262626;\n      font-weight: 600;\n      font-size: 14px;\n      margin: 0 4px;\n    }\n    .store-selector {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      overflow: hidden;\n      span {\n        flex: 1;\n        line-height: 15px;\n        color: #ff397e;\n        font-size: 12px;\n        text-align: right;\n        @include ellicpsis;\n      }\n      i {\n        flex: none;\n        display: block;\n        margin-left: 2px;\n        width: 10px;\n        height: 10px;\n        background: url(https://hzwimspic-1251601690.image.myqcloud.com/6bf76690-90cb-11ed-9682-3d9e57f0f720_size_40x40)\n          0 0/100% 100% no-repeat;\n      }\n    }\n  }\n  .coin-detail {\n    line-height: 18px;\n    color: #ff397e;\n    font-weight: 500;\n    font-size: 12px;\n    word-break: break-all;\n    margin-bottom: 12px;\n  }\n  .consume-info {\n    padding: 12px 12px 10px;\n    border-radius: 8px;\n    background: #ffffff;\n    margin-bottom: 12px;\n    .consume-info-title {\n      display: flex;\n      align-items: center;\n      margin-bottom: 12px;\n      .title {\n        flex: none;\n        line-height: 17px;\n        color: #262626;\n        font-weight: 500;\n        font-size: 13px;\n        margin: 0;\n      }\n    }\n    .consume-items {\n      margin: 0;\n      padding: 0;\n      list-style: none;\n      .consume-item {\n        line-height: 20px;\n        color: #262626;\n        font-size: 12px;\n        margin-bottom: 10px;\n        &::before {\n          content: '';\n          display: inline-block;\n          width: 4px;\n          height: 4px;\n          background: url(https://hzwimspic-1251601690.image.myqcloud.com/fa9dd810-90cc-11ed-9682-3d9e57f0f720_size_16x16)\n            0 0/100% 100% no-repeat;\n          margin-right: 4px;\n          vertical-align: 2px;\n        }\n        &:last-child {\n          margin: 0;\n        }\n        em {\n          color: #ff397e;\n          font-style: normal;\n        }\n      }\n    }\n  }\n  .promotions {\n    display: flex;\n    align-items: center;\n    margin-bottom: 12px;\n    .promotion-labels {\n      flex: 1;\n      display: flex;\n      flex-wrap: wrap;\n      height: 22px;\n      overflow: hidden;\n      .promotion-label {\n        display: flex;\n        align-items: center;\n        height: 22px;\n        padding: 0 6px;\n        background: #ffffff;\n        box-sizing: border-box;\n        line-height: normal;\n        color: #ff397e;\n        font-size: 12px;\n        margin-right: 6px;\n        @include border(all, #ff397e, 1px, 4px);\n        span {\n          @include ellicpsis;\n        }\n      }\n    }\n    .promotion-button {\n      flex: none;\n      width: 42px;\n      height: 20px;\n      background: url(https://hzwimspic-1251601690.image.myqcloud.com/2aebdb00-90d4-11ed-91a9-17a5fe58e408_size_168x80)\n        0 0/100% 100% no-repeat;\n      border: none;\n      padding: 0;\n    }\n  }\n  .desc {\n    line-height: 18px;\n    color: #666666;\n    font-size: 12px;\n    margin: 0;\n    @include ellicpsisN(3);\n  }\n}\n</style>\n","import urlPrefixes from '@/constants/urlPrefixes'\nimport { ajax, cookies, isMiniprogram, isRkhy } from '@/utils'\n\nconst api = {\n  queryShareKey: `${urlPrefixes.mallbackapi}/share/commercialInterface/getKey.do`\n}\n\n/**\n * http://wiki.haiziwang.com/xwiki/bin/view/Main/%E5%95%86%E5%9F%8E%E4%BA%A7%E5%93%81%E7%A0%94%E5%8F%91/%E5%88%86%E4%BA%ABKey%E7%B3%BB%E7%BB%9F-share/%E8%8E%B7%E5%8F%96Key%E6%8E%A5%E5%8F%A3/\n */\nexport async function queryShareKey(params = {}) {\n  const uid = cookies.get('uid')\n  if (!uid) {\n    return ''\n  }\n  const rkhy = isRkhy()\n  try {\n    const jsonobj = {\n      uid,\n      ip: '1.1.1.1',\n      isShort: true,\n      commercialname: '孩子王',\n      token: 'YjYphjJdS5RzGiOoQmnApw==',\n      accessterminal: rkhy\n        ? 1\n        : (await isMiniprogram()) // 企微环境调用可能会卡住\n        ? 6\n        : 2, //接入终端\n      utype: rkhy ? 1 : 2, //用户类型:1员工,2会员\n      linktype: rkhy ? 24 : 2, //链接类型\n      linkcontentid: encodeURIComponent(location.href),\n      remark: {},\n      ...params\n    }\n    const url = `${api.queryShareKey}?jsonobj=${encodeURIComponent(\n      JSON.stringify(jsonobj)\n    )}`\n    const res: any = await ajax.get(url)\n    if (+res.result === 0) {\n      return res.data || ''\n    } else {\n      return ''\n    }\n  } catch (error) {\n    return ''\n  }\n}\n","<template>\n  <section\n    v-if=\"childCardDetail?.skuList && childCardDetail.skuList.length > 0\"\n    class=\"detail\"\n  >\n    <h2 class=\"detail-title\">\n      <i class=\"purchase-icon\"></i>\n      <span class=\"pf-simbold\">童玩卡充值</span>\n      <div class=\"share-icon\" @click=\"shareClick\">\n        <i></i>\n        <span>分享</span>\n      </div>\n    </h2>\n    <div class=\"detail-wrap\">\n      <RechargeDetailSkuList></RechargeDetailSkuList>\n      <RechargeDetailSkuInfo></RechargeDetailSkuInfo>\n    </div>\n  </section>\n</template>\n<script lang=\"ts\" setup>\nimport { useMainStore } from '@/store'\nimport { useChildCardStore } from '@/store/childCard'\nimport {\n  getHserecomkeyUrl,\n  isHzwApp,\n  isMiniprogram,\n  isRkhy,\n  openShareBoard,\n  setShare,\n  trackClick\n} from '@/utils'\nimport { storeToRefs } from 'pinia'\nimport RechargeDetailSkuList from './RechargeDetailSkuList.vue'\nimport RechargeDetailSkuInfo from './RechargeDetailSkuInfo.vue'\nimport { Toast } from 'vant'\nimport queryString from 'query-string'\nimport { queryShareKey } from '@/api/shareKey'\n\nconst mainStore = useMainStore()\nconst childCardStore = useChildCardStore()\nconst { cityInfo } = storeToRefs(mainStore)\nconst { storeInfo, childCardDetail, activedSku } = storeToRefs(childCardStore)\n\nconst shareClick = async () => {\n  const isMini = await isMiniprogram()\n  if (!isHzwApp() && !isRkhy() && !isMini) {\n    Toast('请在App中打开页面进行分享')\n    return\n  }\n  Toast.loading({\n    message: '加载中...',\n    forbidClick: false,\n    duration: 0\n  })\n  const linkObj = queryString.parseUrl(location.href)\n  const link = queryString.stringifyUrl({\n    url: linkObj.url,\n    query: {\n      cityId: cityInfo.value.cityId,\n      storeCode: storeInfo.value.storeCode,\n      skuId: activedSku.value?.skuId\n    }\n  })\n  const title =\n    (childCardDetail.value?.spu.shareMainTitle ||\n      childCardDetail.value?.spu.spuName) +\n    ' - ' +\n    storeInfo.value.storeName\n  const cover =\n    childCardDetail.value?.spu.shareImage ||\n    childCardDetail.value?.spu.cmmdtyImage\n  const remark = JSON.stringify({\n    url: encodeURIComponent(location.href),\n    contentId: childCardDetail.value?.spu.spuId\n  })\n  const linkContentId = JSON.stringify({\n    spuid: childCardDetail.value?.spu.spuId\n  })\n  const price = activedSku.value?.price\n  const coin = activedSku.value\n    ? activedSku.value.rechargeAmount / 100 +\n      activedSku.value.giveAmount / 100 +\n      activedSku.value.returnCoinNum / 100\n    : ''\n  const miniData: any = {}\n  if (isMini) {\n    // 小程序分享信息\n    // 小程序环境需要手动查询分享key并拼接\n    const shareKey = await queryShareKey({\n      linkcontentid: linkContentId,\n      linkcontenttitle: title,\n      remark\n    })\n    Object.assign(miniData, {\n      title,\n      link: getHserecomkeyUrl(link, shareKey), // 分享链接\n      imageList: [cover], // 海报里的主图，多规格商品可以传多个图片\n      imgUrl: cover, // 分享卡片的图片 5:4\n      price, // 价格，单位分，非必传\n      tags: coin ? [`到账${coin}币`] : [],\n      pageTitle: '分享', // 分享页标题\n      backgroundImage: cover\n    })\n  }\n  setShare(\n    {\n      link,\n      channel: '2,3,5,6,7,8',\n      userName: 'gh_362b01c44275', // 孩子王小程序\n      title,\n      desc: storeInfo.value.storeName,\n      imgUrl: cover,\n      linkid: JSON.stringify({\n        spuid: childCardDetail.value?.spu.spuId\n      }),\n      remark,\n      /* 海报 */\n      dpH5: 1,\n      dpinfoH5: JSON.stringify({\n        imageurl: cover, // 海报里的主图，1:1，多规格商品图用逗号分割\n        product_name: title,\n        price, // 价格，单位分，非必传\n        link,\n        path: link,\n        tags: coin ? [`到账${coin}币`] : []\n      }),\n      /* 小程序 */\n      path: `/pages/mall-index/index?refererH5=${encodeURIComponent(link)}`,\n      page: '/pages/mall-index/index',\n      scene: `$$ENCODE(${encodeURIComponent(link)})`\n    },\n    miniData\n  )\n  openShareBoard()\n  Toast.clear()\n  trackClick({\n    bizType: '127',\n    pageLevelId: '121013556',\n    clickId: '200001',\n    positionParam: { storecode: storeInfo.value.storeCode }\n  })\n}\n</script>\n<style lang=\"scss\" scoped>\nsection.detail {\n  margin: 0 12px 12px;\n  .detail-title {\n    display: flex;\n    align-items: center;\n    height: 45px;\n    padding: 0 17px 0 12px;\n    background: url(@/assets/images/recharge/bg-section1.png) 0 0/100% 45px\n      no-repeat;\n    .purchase-icon {\n      flex: none;\n      width: 22px;\n      height: 22px;\n      background: url(@/assets/images/recharge/icon-recharge.png) 0 0/100% 100%\n        no-repeat;\n      margin-right: 4px;\n    }\n    > span {\n      flex: 1;\n      line-height: 22.5px;\n      color: #262626;\n      font-size: 16px;\n      @include ellicpsis;\n    }\n    .share-icon {\n      flex: none;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-direction: column;\n      i {\n        width: 20px;\n        height: 20px;\n        background: url(@/assets/images/recharge/icon-share.png) 0 0/100% 100%\n          no-repeat;\n        margin-bottom: 2px;\n      }\n      span {\n        color: #999999;\n        font-size: 9px;\n        line-height: 11px;\n      }\n    }\n  }\n  .detail-wrap {\n    background: #ffffff;\n    overflow: hidden;\n    border-bottom-left-radius: 16px;\n    border-bottom-right-radius: 16px;\n    padding: 12px;\n  }\n}\n</style>\n","<template>\n  <div class=\"store\" @click=\"storeClick\">\n    <span class=\"store-text\">销售门店</span>\n    <span class=\"store-name\">{{ storeInfo.storeName }}</span>\n    <i class=\"more-icon\"></i>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { useMainStore } from '@/store'\nimport { useChildCardStore } from '@/store/childCard'\nimport { trackClick } from '@/utils'\nimport { storeToRefs } from 'pinia'\nimport { useRouter } from 'vue-router'\n\nconst mainStore = useMainStore()\nconst childCardStore = useChildCardStore()\nconst { cityInfo } = storeToRefs(mainStore)\nconst { storeInfo } = storeToRefs(childCardStore)\nconst router = useRouter()\n\nconst storeClick = () => {\n  router.push({\n    name: 'storeList',\n    query: {\n      citycode: cityInfo.value.cityId,\n      cityname: cityInfo.value.cityName\n    }\n  })\n  trackClick({\n    bizType: '127',\n    pageLevelId: '121013556',\n    clickId: '200002',\n    positionParam: { citycode: cityInfo.value.cityId }\n  })\n}\n</script>\n<style lang=\"scss\" scoped>\n.store {\n  display: flex;\n  align-items: center;\n  height: 44px;\n  padding: 0 12px;\n  margin: 0 12px 12px;\n  border-radius: 8px;\n  background: #ffffff;\n  .store-text {\n    flex: none;\n    color: #999999;\n    font-size: 14px;\n    line-height: 20px;\n    margin-right: 6px;\n  }\n  .store-name {\n    flex: 1;\n    text-align: right;\n    line-height: 20px;\n    color: #262626;\n    font-size: 14px;\n    @include ellicpsis;\n  }\n  .more-icon {\n    flex: none;\n    width: 10px;\n    height: 10px;\n    margin-left: 6px;\n    background: url(@/assets/images/recharge/icon-more.png) 0 0/100% 100%\n      no-repeat;\n  }\n}\n</style>\n","<template>\n  <section v-if=\"childCardDetail?.spu?.content\" class=\"notice\">\n    <h2 class=\"notice-title\">\n      <i class=\"notice-icon\"></i>\n      <span class=\"pf-simbold\">购买须知</span>\n    </h2>\n    <div class=\"notice-wrap\">\n      <div class=\"notice-content\" v-html=\"childCardDetail.spu.content\"></div>\n    </div>\n  </section>\n</template>\n<script lang=\"ts\" setup>\nimport { useChildCardStore } from '@/store/childCard'\nimport { storeToRefs } from 'pinia'\n\nconst childCardStore = useChildCardStore()\nconst { childCardDetail } = storeToRefs(childCardStore)\n</script>\n<style lang=\"scss\" scoped>\nsection.notice {\n  margin: 0 12px;\n  .notice-title {\n    display: flex;\n    align-items: center;\n    height: 45px;\n    padding: 0 10px 0 12px;\n    background: url(@/assets/images/recharge/bg-section2.png) 0 0/100% 45px\n      no-repeat;\n    > .notice-icon {\n      flex: none;\n      width: 22px;\n      height: 22px;\n      background: url(@/assets/images/recharge/icon-notice.png) 0 0/100% 100%\n        no-repeat;\n      margin-right: 4px;\n    }\n    > span {\n      flex: 1;\n      line-height: 22.5px;\n      color: #262626;\n      font-size: 16px;\n      @include ellicpsis;\n    }\n  }\n  .notice-wrap {\n    background: #ffffff;\n    overflow: hidden;\n    border-bottom-left-radius: 16px;\n    border-bottom-right-radius: 16px;\n    .notice-content {\n      margin: 0 10px 10px;\n      word-break: break-word;\n      word-wrap: break-word;\n    }\n  }\n}\n</style>\n","<template>\n  <div v-if=\"activedSku\" class=\"recharge-action\">\n    <button\n      v-if=\"\n        activedSku.availableInventory == 0 ||\n        moment().isAfter(moment(activedSku.saleEndTime))\n      \"\n      disabled\n      class=\"purchase-button pf-medium\"\n    >\n      已售罄\n    </button>\n    <button v-else class=\"purchase-button pf-medium\" @click=\"purchaseClick\">\n      立即购买\n    </button>\n    <div class=\"menu_wkBox_back_box\"></div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { ensureLogin, setLoading, setPage, trackClick } from '@/utils'\n\nimport { useRoute, useRouter } from 'vue-router'\nimport moment from 'moment'\nimport { useChildCardStore } from '@/store/childCard'\nimport { storeToRefs } from 'pinia'\n\nsetLoading(true)\nensureLogin()\nsetPage({\n  title: '童玩卡充值',\n  share: false\n})\n\nconst route = useRoute()\nconst router = useRouter()\n\nconst childCardStore = useChildCardStore()\nconst { childCardDetail, activedSku, storeInfo } = storeToRefs(childCardStore)\n\nconst purchaseClick = () => {\n  router.push({\n    name: 'orderConfirm',\n    query: {\n      spuId: childCardDetail.value?.spu.spuId,\n      skuId: activedSku.value?.skuId,\n      storeCode: storeInfo.value.storeCode,\n      hserecomkey: route.query.hserecomkey,\n      deviceCode: route.query.deviceCode //电玩的充值页会带入deviceCode\n    }\n  })\n  trackClick({\n    bizType: '127',\n    pageLevelId: '121013556',\n    clickId: '200003',\n    positionParam: {\n      skuid: activedSku.value?.skuId,\n      storecode: storeInfo.value.storeCode\n    }\n  })\n}\n</script>\n<style lang=\"scss\" scoped>\n.recharge-action {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  padding: 5px 12px;\n  background: #ffffff;\n  button.purchase-button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 40px;\n    border-radius: 20px;\n    background: linear-gradient(\n      90deg,\n      rgba(255, 57, 126, 1) 0%,\n      rgba(255, 7, 76, 1) 100%\n    );\n    color: #ffffff;\n    font-size: 14px;\n    line-height: 20px;\n  }\n  button.purchase-button[disabled] {\n    background: #cccccc;\n    color: #999999;\n  }\n}\n</style>\n","<template>\n  <div class=\"recharge\">\n    <div class=\"recharge-wrap\">\n      <RechargeCard></RechargeCard>\n      <RechargeDetail></RechargeDetail>\n      <RechargeStore></RechargeStore>\n      <RechargeImgtxt></RechargeImgtxt>\n      <div class=\"menu_wkBox_back_box\"></div>\n    </div>\n    <RechargeAction></RechargeAction>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { queryUserInfo } from '@/api/user'\nimport {\n  cookies,\n  defaultCity,\n  ensureLogin,\n  getCityId,\n  getCityNameByCityId,\n  getPosition,\n  getSelectedCity,\n  setLoading,\n  setPage,\n  toLogin,\n  trackView\n} from '@/utils'\n\nimport { onMounted } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useMainStore } from '@/store/index'\nimport { useChildCardStore } from '@/store/childCard'\nimport { storeToRefs } from 'pinia'\nimport RechargeCard from './components/RechargeCard.vue'\nimport RechargeDetail from './components/RechargeDetail.vue'\nimport RechargeStore from './components/RechargeStore.vue'\nimport RechargeImgtxt from './components/RechargeImgtxt.vue'\nimport RechargeAction from './components/RechargeAction.vue'\n\nsetLoading(true)\nensureLogin()\nsetPage({\n  title: '童玩卡充值',\n  share: false\n})\n\nconst route = useRoute()\n\nconst mainStore = useMainStore()\nconst { userInfo, cityInfo, position } = storeToRefs(mainStore)\nconst childCardStore = useChildCardStore()\nconst { childCardDetail, activeSkuId, storeInfo } = storeToRefs(childCardStore)\n\nonMounted(async () => {\n  // 用户信息查询\n  try {\n    userInfo.value = await queryUserInfo()\n  } catch (error) {\n    console.error(error)\n  }\n  if (!userInfo.value) {\n    toLogin()\n    return\n  }\n  position.value = await getPosition()\n  await childCardStore.initChildCardDetail()\n  completeInfos() // 补全门店名称、城市信息\n  childCardStore.setActivedSkuConsumeInfo()\n  setLoading(false)\n  trackView({\n    bizType: '127',\n    pageLevelId: '121013556',\n    pageParam: {\n      citycode: cityInfo.value.cityId,\n      fuid: cookies.get('uid'),\n      storecode: storeInfo.value.storeCode\n    }\n  })\n})\n\n/* 补全门店、城市信息 */\nasync function completeInfos() {\n  const firstSku = childCardDetail.value?.skuList[0]\n  // sku兜底选中\n  if (route.query.skuId) {\n    activeSkuId.value = Number(route.query.skuId)\n  } else {\n    activeSkuId.value = firstSku?.skuId\n  }\n  // storeInfo\n  storeInfo.value.storeCode = firstSku?.storeCode || ''\n  storeInfo.value.storeName = firstSku?.storeName || ''\n  // cityInfo\n  if (firstSku?.cityId) {\n    cityInfo.value.cityId = getCityId(firstSku.cityId.toString())\n    cityInfo.value.cityName = (\n      await getCityNameByCityId(cityInfo.value.cityId)\n    ).replace('市', '')\n  } else if (route.query.cityId) {\n    cityInfo.value.cityId = <string>route.query.cityId\n    cityInfo.value.cityName = (\n      await getCityNameByCityId(<string>route.query.cityId)\n    ).replace('市', '')\n  } else if (position.value?.cityId && position.value.cityName) {\n    cityInfo.value.cityId = position.value.cityId\n    cityInfo.value.cityName = position.value.cityName\n  } else {\n    const cookieCityInfo = (await getSelectedCity()) || defaultCity\n    cityInfo.value.cityId = cookieCityInfo.cityId\n    cityInfo.value.cityName = cookieCityInfo.cityName\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.recharge {\n  background: url(@/assets/images/recharge/bg-recharge.png) 0 0/100% auto\n    no-repeat;\n  .recharge-wrap {\n    padding: 16px 0 71px;\n  }\n}\n</style>\n"],"names":["api","urlPrefixes","userapi","ccardapi","async","queryChildCardDetail","storeCode","skuId","query","queryString","stringify","result","ajax","get","data","code","useChildCardStore","defineStore","state","childCardDetail","activeSkuId","activedSkuConsumeInfo","storeInfo","storeName","getters","activedSku","skuList","find","item","activedSkuCoinGiftDetail","coinGiftDetail","this","giveAmount","returnCoinNum","activedSkuReturnCoupons","returnCouponInfo","JSON","parse","activedSkuReturnCoins","returnCoinsInfo","actions","mainStore","useMainStore","cookieCityInfo","getSelectedCity","defaultCity","queryNearestChildCard","cityId","$route","position","nearStoreInfos","queryStoreList","lng","lat","error","console","length","$router","replace","name","citycode","store_code","filterId","Toast","msg","queryChildCardConsumeInfo","childCardStore","userInfo","storeToRefs","MEMBER_TYPE","MEMBER_TYPE2","skuAllShowed","ref","getPromotionTitle","type","BLACK_GOLD","HZW_NEW_MEMBER","CHILD_MEMBER","NORMAL","value","sku","setChildCardDetail","setActivedSkuConsumeInfo","router","useRouter","cityInfo","promotionPopupShow","storeClick","push","cityname","cityName","mallbackapi","shareClick","isMini","isMiniprogram","isHzwApp","isRkhy","loading","message","forbidClick","duration","linkObj","parseUrl","location","href","link","stringifyUrl","url","title","spu","shareMainTitle","spuName","cover","shareImage","cmmdtyImage","remark","encodeURIComponent","contentId","spuId","linkContentId","spuid","price","coin","rechargeAmount","miniData","shareKey","params","uid","cookies","rkhy","jsonobj","ip","isShort","commercialname","token","accessterminal","utype","linktype","linkcontentid","res","queryShareKey","linkcontenttitle","Object","assign","getHserecomkeyUrl","imageList","imgUrl","tags","pageTitle","backgroundImage","setShare","channel","userName","desc","linkid","dpH5","dpinfoH5","imageurl","product_name","path","page","scene","openShareBoard","clear","trackClick","bizType","pageLevelId","clickId","positionParam","storecode","setLoading","setPage","share","route","useRoute","purchaseClick","hserecomkey","deviceCode","skuid","onMounted","skey","errno","queryUserInfo","getPosition","initChildCardDetail","firstSku","Number","getCityId","toString","getCityNameByCityId","completeInfos","trackView","pageParam","fuid"],"mappings":"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"}