{"version":3,"file":"PaySuccess.b77e2b07.js","sources":["../../src/views/pay-success/PaySuccess.vue"],"sourcesContent":["<template>\n  <div class=\"pay-success\">\n    <i class=\"success-icon\"></i>\n    <h1 class=\"success-text pf-medium\">订单支付成功</h1>\n    <h2 class=\"success-tip\">童玩币已充值到账</h2>\n    <div class=\"buttons\">\n      <button class=\"view-button\" @click=\"viewClick\">查看订单</button>\n      <button class=\"use-button\" @click=\"useClick\">立即使用</button>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { setPage, toLogin, trackClick, trackView } from '@/utils'\nimport { onMounted, ref } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { queryOrderDetail } from '@/api/order'\nimport { isArray, find } from 'lodash'\nimport { Toast } from 'vant'\nconst route = useRoute()\n\nsetPage({\n  title: '支付成功',\n  share: false\n})\n\nconst orderId = ref(<string>route.query.orderId)\nconst deviceCode = ref('')\nconst cashPay = ref(0) //是否现金支付\n\nconst viewClick = () => {\n  location.href = `/hzwdemo3/order-detail/${orderId.value}?naviType=4&kwtarget=blank`\n  trackClick({\n    bizType: '127',\n    pageLevelId: '121013558',\n    clickId: '200001'\n  })\n}\n\nconst useClick = () => {\n  Toast('模拟跳转二维码核销页面')\n  trackClick({\n    bizType: '127',\n    pageLevelId: '121013558',\n    clickId: '200002'\n  })\n}\n\ntrackView({\n  bizType: '127',\n  pageLevelId: '121013558',\n  pageParam: { orderid: orderId.value }\n})\n\nonMounted(async () => {\n  try {\n    const result: any = await queryOrderDetail(orderId.value)\n    if (result) {\n      cashPay.value = +result.orderSource === 13 ? 1 : 0\n      if (result.extInfoList && isArray(result.extInfoList)) {\n        const val = find(\n          result.extInfoList,\n          item => 'deviceCode' === item.labelKey\n        )\n        if (val) {\n          deviceCode.value = val.labelValue\n        }\n      }\n    }\n  } catch (error: any) {\n    console.error(error)\n    if (error?.code == '4') {\n      return toLogin()\n    } else {\n      Toast(error?.msg || '网络错误')\n    }\n  }\n})\n</script>\n<style lang=\"scss\" scoped>\n.pay-success {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  background: #ffffff;\n  height: 321px;\n  .success-icon {\n    width: 94px;\n    height: 94.5px;\n    background: url(@/assets/images/pay-success/icon-success.png) 0 0/100% 100%\n      no-repeat;\n    margin-bottom: 12px;\n  }\n  .success-text {\n    font-size: 20px;\n    color: #262626;\n    line-height: 24px;\n    margin-bottom: 10px;\n  }\n  .success-tip {\n    font-size: 15px;\n    color: #666666;\n    line-height: 21px;\n    margin-bottom: 30px;\n  }\n  .buttons {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    button {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 120px;\n      height: 40px;\n      border-radius: 20.5px;\n      font-size: 14px;\n      line-height: 16px;\n    }\n    button.view-button {\n      border: 1px solid #999999;\n      color: #2a2a2a;\n      margin-right: 24px;\n    }\n    button.use-button {\n      background: linear-gradient(90deg, #ff397e, #ff074c);\n      color: #ffffff;\n    }\n  }\n}\n</style>\n"],"names":["route","useRoute","setPage","orderId","ref","deviceCode","cashPay","viewClick","trackClick","useClick","Toast","trackView","onMounted","__async","result","queryOrderDetail","isArray","val","find","item","error","toLogin"],"mappings":"8yBAkBA,MAAAA,EAAAC,IAEAC,EAAA,CAAQ,MAAA,2BACC,MAAA,EACA,CAAA,EAGT,MAAAC,EAAAC,EAAAJ,EAAA,MAAA,OAAA,EACAK,EAAAD,EAAA,EAAA,EACAE,EAAAF,EAAA,CAAA,EAEAG,EAAA,IAAA,CACE,SAAA,KAAA,0BAAAJ,EAAA,kCACAK,EAAA,CAAW,QAAA,MACA,YAAA,YACI,QAAA,QACJ,CAAA,CACV,EAGHC,EAAA,IAAA,CACEC,EAAA,oEAAA,EACAF,EAAA,CAAW,QAAA,MACA,YAAA,YACI,QAAA,QACJ,CAAA,CACV,EAGH,OAAAG,EAAA,CAAU,QAAA,MACC,YAAA,YACI,UAAA,CAAA,QAAAR,EAAA,KAAA,CACuB,CAAA,EAGtCS,EAAA,IAAAC,EAAA,sBACE,GAAA,CACE,MAAAC,EAAA,MAAAC,EAAAZ,EAAA,KAAA,EACA,GAAAW,IACER,EAAA,MAAA,CAAAQ,EAAA,aAAA,GAAA,EAAA,EACAA,EAAA,aAAAE,EAAA,QAAA,QAAAF,EAAA,WAAA,GAAA,CACE,MAAAG,EAAAC,EAAA,QAAA,KAAYJ,EAAA,YACHK,GAAAA,EAAA,WAAA,YACuB,EAEhCF,IACEZ,EAAA,MAAAY,EAAA,WACF,CAEJ,OAAAG,EAAA,CAGA,GADA,QAAA,MAAAA,CAAA,GACAA,GAAA,YAAAA,EAAA,OAAA,IACE,OAAAC,EAAA,EAEAX,GAAAU,GAAA,YAAAA,EAAA,MAAA,0BAAA,CACF,CACF,EAAA"}