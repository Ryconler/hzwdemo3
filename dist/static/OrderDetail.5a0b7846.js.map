{"version":3,"file":"OrderDetail.5a0b7846.js","sources":["../../node_modules/vant/es/composables/use-height.mjs","../../node_modules/vant/es/composables/use-placeholder.mjs","../../node_modules/vant/es/action-bar/ActionBar.mjs","../../node_modules/vant/es/action-bar/index.mjs","../../node_modules/vant/es/button/Button.mjs","../../node_modules/vant/es/button/index.mjs","../../node_modules/vant/es/action-bar-button/ActionBarButton.mjs","../../node_modules/vant/es/action-bar-button/index.mjs","../../node_modules/vant/es/dialog/Dialog.mjs","../../node_modules/vant/es/dialog/function-call.mjs","../../src/views/order-detail/OrderDetail.vue"],"sourcesContent":["import { useRect } from \"@vant/use\";\nimport { ref, onMounted, nextTick } from \"vue\";\nimport { onPopupReopen } from \"./on-popup-reopen.mjs\";\nconst useHeight = (element, withSafeArea) => {\n  const height = ref();\n  const setHeight = () => {\n    height.value = useRect(element).height;\n  };\n  onMounted(() => {\n    nextTick(setHeight);\n    if (withSafeArea) {\n      for (let i = 1; i <= 3; i++) {\n        setTimeout(setHeight, 100 * i);\n      }\n    }\n  });\n  onPopupReopen(() => nextTick(setHeight));\n  return height;\n};\nexport {\n  useHeight\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { useHeight } from \"./use-height.mjs\";\nfunction usePlaceholder(contentRef, bem) {\n  const height = useHeight(contentRef, true);\n  return (renderContent) => _createVNode(\"div\", {\n    \"class\": bem(\"placeholder\"),\n    \"style\": {\n      height: height.value ? `${height.value}px` : void 0\n    }\n  }, [renderContent()]);\n}\nexport {\n  usePlaceholder\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent, ref } from \"vue\";\nimport { truthProp, createNamespace } from \"../utils/index.mjs\";\nimport { useChildren } from \"@vant/use\";\nimport { usePlaceholder } from \"../composables/use-placeholder.mjs\";\nconst [name, bem] = createNamespace(\"action-bar\");\nconst ACTION_BAR_KEY = Symbol(name);\nconst actionBarProps = {\n  placeholder: Boolean,\n  safeAreaInsetBottom: truthProp\n};\nvar stdin_default = defineComponent({\n  name,\n  props: actionBarProps,\n  setup(props, {\n    slots\n  }) {\n    const root = ref();\n    const renderPlaceholder = usePlaceholder(root, bem);\n    const {\n      linkChildren\n    } = useChildren(ACTION_BAR_KEY);\n    linkChildren();\n    const renderActionBar = () => {\n      var _a;\n      return _createVNode(\"div\", {\n        \"ref\": root,\n        \"class\": [bem(), {\n          \"van-safe-area-bottom\": props.safeAreaInsetBottom\n        }]\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n    return () => {\n      if (props.placeholder) {\n        return renderPlaceholder(renderActionBar);\n      }\n      return renderActionBar();\n    };\n  }\n});\nexport {\n  ACTION_BAR_KEY,\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _ActionBar from \"./ActionBar.mjs\";\nconst ActionBar = withInstall(_ActionBar);\nvar stdin_default = ActionBar;\nexport {\n  ActionBar,\n  stdin_default as default\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { extend, numericProp, preventDefault, makeStringProp, createNamespace, BORDER_SURROUND } from \"../utils/index.mjs\";\nimport { useRoute, routeProps } from \"../composables/use-route.mjs\";\nimport { Icon } from \"../icon/index.mjs\";\nimport { Loading } from \"../loading/index.mjs\";\nconst [name, bem] = createNamespace(\"button\");\nconst buttonProps = extend({}, routeProps, {\n  tag: makeStringProp(\"button\"),\n  text: String,\n  icon: String,\n  type: makeStringProp(\"default\"),\n  size: makeStringProp(\"normal\"),\n  color: String,\n  block: Boolean,\n  plain: Boolean,\n  round: Boolean,\n  square: Boolean,\n  loading: Boolean,\n  hairline: Boolean,\n  disabled: Boolean,\n  iconPrefix: String,\n  nativeType: makeStringProp(\"button\"),\n  loadingSize: numericProp,\n  loadingText: String,\n  loadingType: String,\n  iconPosition: makeStringProp(\"left\")\n});\nvar stdin_default = defineComponent({\n  name,\n  props: buttonProps,\n  emits: [\"click\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const route = useRoute();\n    const renderLoadingIcon = () => {\n      if (slots.loading) {\n        return slots.loading();\n      }\n      return _createVNode(Loading, {\n        \"size\": props.loadingSize,\n        \"type\": props.loadingType,\n        \"class\": bem(\"loading\")\n      }, null);\n    };\n    const renderIcon = () => {\n      if (props.loading) {\n        return renderLoadingIcon();\n      }\n      if (slots.icon) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"icon\")\n        }, [slots.icon()]);\n      }\n      if (props.icon) {\n        return _createVNode(Icon, {\n          \"name\": props.icon,\n          \"class\": bem(\"icon\"),\n          \"classPrefix\": props.iconPrefix\n        }, null);\n      }\n    };\n    const renderText = () => {\n      let text;\n      if (props.loading) {\n        text = props.loadingText;\n      } else {\n        text = slots.default ? slots.default() : props.text;\n      }\n      if (text) {\n        return _createVNode(\"span\", {\n          \"class\": bem(\"text\")\n        }, [text]);\n      }\n    };\n    const getStyle = () => {\n      const {\n        color,\n        plain\n      } = props;\n      if (color) {\n        const style = {\n          color: plain ? color : \"white\"\n        };\n        if (!plain) {\n          style.background = color;\n        }\n        if (color.includes(\"gradient\")) {\n          style.border = 0;\n        } else {\n          style.borderColor = color;\n        }\n        return style;\n      }\n    };\n    const onClick = (event) => {\n      if (props.loading) {\n        preventDefault(event);\n      } else if (!props.disabled) {\n        emit(\"click\", event);\n        route();\n      }\n    };\n    return () => {\n      const {\n        tag,\n        type,\n        size,\n        block,\n        round,\n        plain,\n        square,\n        loading,\n        disabled,\n        hairline,\n        nativeType,\n        iconPosition\n      } = props;\n      const classes = [bem([type, size, {\n        plain,\n        block,\n        round,\n        square,\n        loading,\n        disabled,\n        hairline\n      }]), {\n        [BORDER_SURROUND]: hairline\n      }];\n      return _createVNode(tag, {\n        \"type\": nativeType,\n        \"class\": classes,\n        \"style\": getStyle(),\n        \"disabled\": disabled,\n        \"onClick\": onClick\n      }, {\n        default: () => [_createVNode(\"div\", {\n          \"class\": bem(\"content\")\n        }, [iconPosition === \"left\" && renderIcon(), renderText(), iconPosition === \"right\" && renderIcon()])]\n      });\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Button from \"./Button.mjs\";\nconst Button = withInstall(_Button);\nvar stdin_default = Button;\nexport {\n  Button,\n  stdin_default as default\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { computed, defineComponent } from \"vue\";\nimport { extend, createNamespace } from \"../utils/index.mjs\";\nimport { ACTION_BAR_KEY } from \"../action-bar/ActionBar.mjs\";\nimport { useParent } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nimport { useRoute, routeProps } from \"../composables/use-route.mjs\";\nimport { Button } from \"../button/index.mjs\";\nconst [name, bem] = createNamespace(\"action-bar-button\");\nconst actionBarButtonProps = extend({}, routeProps, {\n  type: String,\n  text: String,\n  icon: String,\n  color: String,\n  loading: Boolean,\n  disabled: Boolean\n});\nvar stdin_default = defineComponent({\n  name,\n  props: actionBarButtonProps,\n  setup(props, {\n    slots\n  }) {\n    const route = useRoute();\n    const {\n      parent,\n      index\n    } = useParent(ACTION_BAR_KEY);\n    const isFirst = computed(() => {\n      if (parent) {\n        const prev = parent.children[index.value - 1];\n        return !(prev && \"isButton\" in prev);\n      }\n    });\n    const isLast = computed(() => {\n      if (parent) {\n        const next = parent.children[index.value + 1];\n        return !(next && \"isButton\" in next);\n      }\n    });\n    useExpose({\n      isButton: true\n    });\n    return () => {\n      const {\n        type,\n        icon,\n        text,\n        color,\n        loading,\n        disabled\n      } = props;\n      return _createVNode(Button, {\n        \"class\": bem([type, {\n          last: isLast.value,\n          first: isFirst.value\n        }]),\n        \"size\": \"large\",\n        \"type\": type,\n        \"icon\": icon,\n        \"color\": color,\n        \"loading\": loading,\n        \"disabled\": disabled,\n        \"onClick\": route\n      }, {\n        default: () => [slots.default ? slots.default() : text]\n      });\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _ActionBarButton from \"./ActionBarButton.mjs\";\nconst ActionBarButton = withInstall(_ActionBarButton);\nvar stdin_default = ActionBarButton;\nexport {\n  ActionBarButton,\n  stdin_default as default\n};\n","import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\nimport { ref, reactive, withKeys, defineComponent } from \"vue\";\nimport { noop, pick, extend, addUnit, truthProp, isFunction, BORDER_TOP, BORDER_LEFT, unknownProp, numericProp, makeStringProp, callInterceptor, createNamespace } from \"../utils/index.mjs\";\nimport { popupSharedProps, popupSharedPropKeys } from \"../popup/shared.mjs\";\nimport { Popup } from \"../popup/index.mjs\";\nimport { Button } from \"../button/index.mjs\";\nimport { ActionBar } from \"../action-bar/index.mjs\";\nimport { ActionBarButton } from \"../action-bar-button/index.mjs\";\nconst [name, bem, t] = createNamespace(\"dialog\");\nconst dialogProps = extend({}, popupSharedProps, {\n  title: String,\n  theme: String,\n  width: numericProp,\n  message: [String, Function],\n  callback: Function,\n  allowHtml: Boolean,\n  className: unknownProp,\n  transition: makeStringProp(\"van-dialog-bounce\"),\n  messageAlign: String,\n  closeOnPopstate: truthProp,\n  showCancelButton: Boolean,\n  cancelButtonText: String,\n  cancelButtonColor: String,\n  cancelButtonDisabled: Boolean,\n  confirmButtonText: String,\n  confirmButtonColor: String,\n  confirmButtonDisabled: Boolean,\n  showConfirmButton: truthProp,\n  closeOnClickOverlay: Boolean\n});\nconst popupInheritKeys = [...popupSharedPropKeys, \"transition\", \"closeOnPopstate\"];\nvar stdin_default = defineComponent({\n  name,\n  props: dialogProps,\n  emits: [\"confirm\", \"cancel\", \"keydown\", \"update:show\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const root = ref();\n    const loading = reactive({\n      confirm: false,\n      cancel: false\n    });\n    const updateShow = (value) => emit(\"update:show\", value);\n    const close = (action) => {\n      var _a;\n      updateShow(false);\n      (_a = props.callback) == null ? void 0 : _a.call(props, action);\n    };\n    const getActionHandler = (action) => () => {\n      if (!props.show) {\n        return;\n      }\n      emit(action);\n      if (props.beforeClose) {\n        loading[action] = true;\n        callInterceptor(props.beforeClose, {\n          args: [action],\n          done() {\n            close(action);\n            loading[action] = false;\n          },\n          canceled() {\n            loading[action] = false;\n          }\n        });\n      } else {\n        close(action);\n      }\n    };\n    const onCancel = getActionHandler(\"cancel\");\n    const onConfirm = getActionHandler(\"confirm\");\n    const onKeydown = withKeys((event) => {\n      var _a, _b;\n      if (event.target !== ((_b = (_a = root.value) == null ? void 0 : _a.popupRef) == null ? void 0 : _b.value)) {\n        return;\n      }\n      const onEventType = {\n        Enter: props.showConfirmButton ? onConfirm : noop,\n        Escape: props.showCancelButton ? onCancel : noop\n      };\n      onEventType[event.key]();\n      emit(\"keydown\", event);\n    }, [\"enter\", \"esc\"]);\n    const renderTitle = () => {\n      const title = slots.title ? slots.title() : props.title;\n      if (title) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"header\", {\n            isolated: !props.message && !slots.default\n          })\n        }, [title]);\n      }\n    };\n    const renderMessage = (hasTitle) => {\n      const {\n        message,\n        allowHtml,\n        messageAlign\n      } = props;\n      const classNames = bem(\"message\", {\n        \"has-title\": hasTitle,\n        [messageAlign]: messageAlign\n      });\n      const content = isFunction(message) ? message() : message;\n      if (allowHtml && typeof content === \"string\") {\n        return _createVNode(\"div\", {\n          \"class\": classNames,\n          \"innerHTML\": content\n        }, null);\n      }\n      return _createVNode(\"div\", {\n        \"class\": classNames\n      }, [content]);\n    };\n    const renderContent = () => {\n      if (slots.default) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"content\")\n        }, [slots.default()]);\n      }\n      const {\n        title,\n        message,\n        allowHtml\n      } = props;\n      if (message) {\n        const hasTitle = !!(title || slots.title);\n        return _createVNode(\"div\", {\n          \"key\": allowHtml ? 1 : 0,\n          \"class\": bem(\"content\", {\n            isolated: !hasTitle\n          })\n        }, [renderMessage(hasTitle)]);\n      }\n    };\n    const renderButtons = () => _createVNode(\"div\", {\n      \"class\": [BORDER_TOP, bem(\"footer\")]\n    }, [props.showCancelButton && _createVNode(Button, {\n      \"size\": \"large\",\n      \"text\": props.cancelButtonText || t(\"cancel\"),\n      \"class\": bem(\"cancel\"),\n      \"style\": {\n        color: props.cancelButtonColor\n      },\n      \"loading\": loading.cancel,\n      \"disabled\": props.cancelButtonDisabled,\n      \"onClick\": onCancel\n    }, null), props.showConfirmButton && _createVNode(Button, {\n      \"size\": \"large\",\n      \"text\": props.confirmButtonText || t(\"confirm\"),\n      \"class\": [bem(\"confirm\"), {\n        [BORDER_LEFT]: props.showCancelButton\n      }],\n      \"style\": {\n        color: props.confirmButtonColor\n      },\n      \"loading\": loading.confirm,\n      \"disabled\": props.confirmButtonDisabled,\n      \"onClick\": onConfirm\n    }, null)]);\n    const renderRoundButtons = () => _createVNode(ActionBar, {\n      \"class\": bem(\"footer\")\n    }, {\n      default: () => [props.showCancelButton && _createVNode(ActionBarButton, {\n        \"type\": \"warning\",\n        \"text\": props.cancelButtonText || t(\"cancel\"),\n        \"class\": bem(\"cancel\"),\n        \"color\": props.cancelButtonColor,\n        \"loading\": loading.cancel,\n        \"disabled\": props.cancelButtonDisabled,\n        \"onClick\": onCancel\n      }, null), props.showConfirmButton && _createVNode(ActionBarButton, {\n        \"type\": \"danger\",\n        \"text\": props.confirmButtonText || t(\"confirm\"),\n        \"class\": bem(\"confirm\"),\n        \"color\": props.confirmButtonColor,\n        \"loading\": loading.confirm,\n        \"disabled\": props.confirmButtonDisabled,\n        \"onClick\": onConfirm\n      }, null)]\n    });\n    const renderFooter = () => {\n      if (slots.footer) {\n        return slots.footer();\n      }\n      return props.theme === \"round-button\" ? renderRoundButtons() : renderButtons();\n    };\n    return () => {\n      const {\n        width,\n        title,\n        theme,\n        message,\n        className\n      } = props;\n      return _createVNode(Popup, _mergeProps({\n        \"ref\": root,\n        \"role\": \"dialog\",\n        \"class\": [bem([theme]), className],\n        \"style\": {\n          width: addUnit(width)\n        },\n        \"tabindex\": 0,\n        \"aria-labelledby\": title || message,\n        \"onKeydown\": onKeydown,\n        \"onUpdate:show\": updateShow\n      }, pick(props, popupInheritKeys)), {\n        default: () => [renderTitle(), renderContent(), renderFooter()]\n      });\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\nimport { extend, inBrowser, withInstall } from \"../utils/index.mjs\";\nimport { mountComponent, usePopupState } from \"../utils/mount-component.mjs\";\nimport VanDialog from \"./Dialog.mjs\";\nlet instance;\nfunction initInstance() {\n  const Wrapper = {\n    setup() {\n      const {\n        state,\n        toggle\n      } = usePopupState();\n      return () => _createVNode(VanDialog, _mergeProps(state, {\n        \"onUpdate:show\": toggle\n      }), null);\n    }\n  };\n  ({\n    instance\n  } = mountComponent(Wrapper));\n}\nfunction Dialog(options) {\n  if (!inBrowser) {\n    return Promise.resolve();\n  }\n  return new Promise((resolve, reject) => {\n    if (!instance) {\n      initInstance();\n    }\n    instance.open(extend({}, Dialog.currentOptions, options, {\n      callback: (action) => {\n        (action === \"confirm\" ? resolve : reject)(action);\n      }\n    }));\n  });\n}\nDialog.defaultOptions = {\n  title: \"\",\n  width: \"\",\n  theme: null,\n  message: \"\",\n  overlay: true,\n  callback: null,\n  teleport: \"body\",\n  className: \"\",\n  allowHtml: false,\n  lockScroll: true,\n  transition: void 0,\n  beforeClose: null,\n  overlayClass: \"\",\n  overlayStyle: void 0,\n  messageAlign: \"\",\n  cancelButtonText: \"\",\n  cancelButtonColor: null,\n  cancelButtonDisabled: false,\n  confirmButtonText: \"\",\n  confirmButtonColor: null,\n  confirmButtonDisabled: false,\n  showConfirmButton: true,\n  showCancelButton: false,\n  closeOnPopstate: true,\n  closeOnClickOverlay: false\n};\nDialog.currentOptions = extend({}, Dialog.defaultOptions);\nDialog.alert = Dialog;\nDialog.confirm = (options) => Dialog(extend({\n  showCancelButton: true\n}, options));\nDialog.close = () => {\n  if (instance) {\n    instance.toggle(false);\n  }\n};\nDialog.setDefaultOptions = (options) => {\n  extend(Dialog.currentOptions, options);\n};\nDialog.resetDefaultOptions = () => {\n  Dialog.currentOptions = extend({}, Dialog.defaultOptions);\n};\nDialog.Component = withInstall(VanDialog);\nDialog.install = (app) => {\n  app.use(Dialog.Component);\n  app.config.globalProperties.$dialog = Dialog;\n};\nexport {\n  Dialog\n};\n","<template>\n  <div v-if=\"orderDtail\" class=\"order-detail\">\n    <div class=\"order-bg\" :style=\"{ paddingTop: `${barHeight + navHeight}px` }\">\n      <!-- 全屏页面顶部nav -->\n      <div\n        v-if=\"isFullscreen && barHeight > 0\"\n        class=\"order-nav\"\n        :style=\"{ top: `${barHeight}px`, height: `${navHeight}px` }\"\n      >\n        <i class=\"nav-back\" @click=\"backClick\"></i>\n      </div>\n      <!-- 订单状态icon+文描 -->\n      <h1 v-if=\"orderStatus.text\" class=\"order-status pf-medium\">\n        <i :style=\"{ 'background-image': `url(${orderStatus.icon})` }\"></i\n        >{{ orderStatus.text }}\n      </h1>\n      <!-- 支付倒计时 -->\n      <p\n        v-if=\"orderDtail.orderState == OrderState.WaitPay && orderPayCountDown\"\n        class=\"order-text pf-medium\"\n      >\n        还剩 {{ orderPayCountDown }} 自动取消\n      </p>\n      <!-- 退款完成 -->\n      <p\n        v-if=\"\n          orderDtail.refundState == OrderRefundState.Succeed &&\n          orderDtail.refundTime\n        \"\n        class=\"order-text pf-medium\"\n      >\n        {{ moment(orderDtail.refundTime).format('YYYY-MM-DD HH:mm:ss') }}\n        退款完成\n      </p>\n      <!-- 退款详情 -->\n      <button\n        v-if=\"\n          orderDtail.refundState == OrderRefundState.Applying ||\n          orderDtail.refundState == OrderRefundState.Succeed\n        \"\n        class=\"order-refund-detail\"\n        @click=\"refundDetailClick\"\n      >\n        退款详情<i></i>\n      </button>\n    </div>\n    <div class=\"order-detail-wrap\">\n      <ProductCard\n        v-if=\"productInfo\"\n        class=\"product-comp\"\n        :product=\"productInfo\"\n        @click=\"productClick\"\n      ></ProductCard>\n      <section v-if=\"orderPayed\" class=\"coin\">\n        <h2 class=\"section-title pf-medium\">币值信息</h2>\n        <ul class=\"table-list\">\n          <li class=\"table-item\">\n            <span class=\"name\">充值币值</span>\n            <div class=\"value pf-medium\">\n              {{ orderDtail.rechargeAmount / 100 }}\n            </div>\n          </li>\n          <li class=\"table-item\">\n            <span class=\"name\">赠送币值</span>\n            <div class=\"value pf-medium\">{{ orderDtail.giveAmount / 100 }}</div>\n          </li>\n          <li class=\"table-item\">\n            <span class=\"name\">到账币值</span>\n            <div class=\"value pf-medium\">\n              {{\n                orderDtail.rechargeAmount / 100 + orderDtail.giveAmount / 100\n              }}\n            </div>\n          </li>\n        </ul>\n        <div class=\"dividle\"></div>\n        <ul class=\"table-list\">\n          <li class=\"table-item\">\n            <span class=\"name\">消费币值</span>\n            <div class=\"value pf-medium\">{{ orderDtail.consume / 100 }}</div>\n          </li>\n          <li class=\"table-item\">\n            <span class=\"name\">剩余币值</span>\n            <div class=\"value pf-medium\" style=\"color: #ff397e\">\n              {{ orderDtail.leftAmount / 100 }}\n            </div>\n          </li>\n          <p class=\"coin-tip\">*剩余币值=到账币值-消费币值</p>\n        </ul>\n      </section>\n      <section\n        v-if=\"\n          returnCoupons.length > 0 ||\n          (returnCoins && returnCoins.returnCoinNum > 0)\n        \"\n        class=\"promotion\"\n      >\n        <h2 class=\"section-title pf-medium\">优惠信息</h2>\n        <ul class=\"table-list\">\n          <li v-if=\"returnCoupons.length > 0\" class=\"table-item coupon\">\n            <span class=\"name\">充值返券</span>\n            <div class=\"value pf-medium\">\n              <div v-for=\"(item, index) in returnCoupons\" :key=\"index\">\n                {{ item }}\n              </div>\n            </div>\n          </li>\n          <template v-if=\"returnCoins && returnCoins.returnCoinNum > 0\">\n            <li class=\"table-item\">\n              <span class=\"name\">核销返币</span>\n              <div class=\"value pf-medium\">\n                {{ returnCoins.returnCoinNum / 100 }}\n              </div>\n            </li>\n            <p\n              class=\"promotion-tip\"\n              :class=\"returnCoins.hasReturn ? 'has-return' : ''\"\n              @click=\"showTrips\"\n            >\n              {{ returnCoinNumTitle }}<span></span>\n            </p>\n          </template>\n        </ul>\n      </section>\n      <section class=\"order\">\n        <h2 class=\"section-title pf-medium\">订单信息</h2>\n        <ul class=\"table-list\">\n          <li class=\"table-item\">\n            <span class=\"name\">购买数量</span>\n            <div class=\"value pf-medium\">{{ orderDtail.num }}</div>\n          </li>\n          <li class=\"table-item param-total\">\n            <span class=\"name\">商品总额</span>\n            <div class=\"value pf-medium\">\n              ¥{{ getYenPrice(orderDtail.orderPrice) }}\n            </div>\n          </li>\n          <li class=\"table-item param-total\">\n            <span class=\"name\">{{ orderPayed ? '实付款' : '应付款' }}</span>\n            <div class=\"value pf-medium\" style=\"color: #ff397e\">\n              ¥<em class=\"big\">{{ getYenPrice(orderDtail.payPrice) }}</em>\n            </div>\n          </li>\n        </ul>\n        <div class=\"dividle\"></div>\n        <ul class=\"table-list\">\n          <li class=\"table-item\">\n            <span class=\"name\">订单编号：</span>\n            <div class=\"value pf-medium\">\n              {{ orderDtail.orderId\n              }}<span\n                :style=\"{ color: '#ff397e', marginLeft: `${10 / 37.5}rem` }\"\n                @click=\"copyClick\"\n                >复制</span\n              >\n            </div>\n          </li>\n          <li class=\"table-item param-total\">\n            <span class=\"name\">下单时间：</span>\n            <div class=\"value pf-medium\">\n              {{ moment(orderDtail.orderTime).format('YYYY-MM-DD HH:mm:ss') }}\n            </div>\n          </li>\n          <li class=\"table-item param-total\">\n            <span class=\"name\">订单状态：</span>\n            <div class=\"value pf-medium\">{{ orderStatus.text }}</div>\n          </li>\n        </ul>\n      </section>\n      <div class=\"menu_wkBox_back_box\"></div>\n    </div>\n    <div\n      v-if=\"orderDtail.orderState == OrderState.WaitPay\"\n      class=\"order-detail-action\"\n    >\n      <div class=\"action-wrap\">\n        <button class=\"cancel-button\" @click=\"cancelClick\">取消订单</button>\n        <button class=\"pay-button\" @click=\"payClick\">立即支付</button>\n      </div>\n      <div class=\"menu_wkBox_back_box\"></div>\n    </div>\n    <van-dialog\n      v-if=\"orderDtail.returnCoinsInfo\"\n      v-model:show=\"show\"\n      confirm-button-text=\"知道了\"\n    >\n      <div class=\"dialog-container\">\n        <p>\n          下单成功后，{{\n            orderDtail.returnCoinsInfo.endTime\n              ? orderDtail.returnCoinsInfo.endTime + '之前'\n              : ''\n          }}在以下门店核销1次即可返币：\n        </p>\n        <span\n          v-for=\"(item, index) in orderDtail?.returnCoinsInfo.storeInfo\"\n          :key=\"index\"\n          >·{{ item.storeName }}</span\n        >\n      </div>\n    </van-dialog>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport {\n  copyTextClipboard,\n  getYenPrice,\n  isApp,\n  rem2RealPx,\n  setPage,\n  toLogin,\n  trackView\n} from '@/utils'\nimport { computed, onMounted, Ref, ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { cancelOrder, queryOrderDetail } from '@/api/order'\nimport { OrderType } from '@/types/order'\nimport { getOrderStatus, jumpToCashier } from '@/composables/order'\nimport moment from 'moment'\nimport { OrderRefundState, OrderState } from '@/constants/order'\nimport { Toast, Dialog } from 'vant'\nimport { debounce } from 'lodash'\nconst VanDialog = Dialog.Component\nconst route = useRoute()\n\nsetPage({\n  title: '订单详情',\n  share: false\n})\n\nconst isFullscreen = computed(() => {\n  const naviType = route.query.naviType\n  return isApp() && naviType == '4'\n})\n\nconst barHeight = computed(() => {\n  return 0\n})\n\nconst navHeight = computed(() => {\n  if (isFullscreen.value) {\n    return rem2RealPx(44 / 37.5)\n  }\n  return rem2RealPx(22 / 37.5)\n})\n\nconst returnCoinNumTitle = computed(() => {\n  if (returnCoins.value) {\n    if (returnCoins.value.hasReturn) {\n      return '*已核销返币'\n    } else {\n      let str = returnCoins.value.endTime\n        ? returnCoins.value.endTime + '之前'\n        : ''\n      return `未返，${str}在指定门店核销即可返币`\n    }\n  }\n  return ''\n})\n\nconst orderId = ref(<string>route.params.orderId)\nconst orderDtail: Ref<OrderType | null> = ref(null)\nconst orderPayCountDown = ref('')\nlet orderPayCountDownInterval: number\n\n/* 订单状态图标与文字 */\nconst orderStatus = computed(() => {\n  return orderDtail.value ? getOrderStatus(orderDtail.value) : {}\n})\n\n/* 订单是否已支付 */\nconst orderPayed = computed(() => {\n  return (\n    orderStatus.value.text != '待支付' && orderStatus.value.text != '已取消'\n  )\n})\n\nconst productInfo = computed(() => {\n  return (\n    orderDtail.value && {\n      cmmdtyImage: orderDtail.value.commdtyImage,\n      skuName: orderDtail.value.skuName,\n      price: orderDtail.value.skuPrice,\n      giveAmount: orderDtail.value.giveAmount / orderDtail.value.num,\n      rechargeAmount: orderDtail.value.rechargeAmount / orderDtail.value.num,\n      returnCoinNum:\n        (orderDtail.value.returnCoinsInfo &&\n          orderDtail.value.returnCoinsInfo.returnCoinNum /\n            orderDtail.value.num) ??\n        0 //返币\n    }\n  )\n})\n/* 返券 */\nconst returnCoupons = computed(() => {\n  return orderDtail.value?.returnCouponInfo || []\n  // if (orderDtail.value?.returnCouponInfo) {\n  //   return JSON.parse(orderDtail.value.returnCouponInfo) || []\n  // } else {\n  //   return []\n  // }\n})\n/* 返币 */\nconst returnCoins = computed(() => {\n  return orderDtail.value?.returnCoinsInfo\n})\n\nconst show = ref(false)\n\nconst showTrips = () => {\n  if (orderDtail.value?.returnCoinsInfo?.hasReturn) return\n  show.value = true\n}\n\nonMounted(async () => {\n  try {\n    orderDtail.value = await queryOrderDetail(orderId.value)\n  } catch (error: any) {\n    console.error(error)\n    if (error?.code == '4') {\n      return toLogin()\n    } else {\n      Toast(error?.msg || '网络错误')\n    }\n  }\n  if (orderDtail.value?.orderState == OrderState.WaitPay) {\n    let finished = calcOrderPayCountDown()\n    if (!finished) {\n      orderPayCountDownInterval = setInterval(() => {\n        finished = calcOrderPayCountDown()\n        finished && location.reload()\n      }, 1000)\n    }\n  }\n  trackView({\n    bizType: '127',\n    pageLevelId: '121013559',\n    pageParam: { orderid: orderId.value }\n  })\n})\n\n/* 待支付倒计时 */\nfunction calcOrderPayCountDown(): boolean {\n  const nowMoment = moment()\n  const expireMoment = moment(orderDtail.value?.orderTime).add(1, 'hours')\n  if (expireMoment.isValid()) {\n    const diff = expireMoment.diff(nowMoment, 'seconds')\n    if (diff <= 0) {\n      // 倒计时结束\n      clearInterval(orderPayCountDownInterval)\n      orderPayCountDown.value = `${0}分${0}秒`\n      return true\n    } else {\n      const diffMinutes = Math.floor(diff / 60)\n      const diffSeconds = diff % 60\n      orderPayCountDown.value = `${diffMinutes}分${diffSeconds}秒`\n    }\n  } else {\n    clearInterval(orderPayCountDownInterval)\n    orderPayCountDown.value = ''\n  }\n  return false\n}\n\nconst backClick = () => {\n}\n\nconst productClick = () => {\n  location.href = `/hzwdemo3/recharge?kwtarget=blank`\n}\n\nconst copyClick = async () => {\n  const res = await copyTextClipboard(orderDtail.value?.orderId)\n  if (res) {\n    Toast('复制成功')\n  } else {\n    Toast('复制失败')\n  }\n}\n\nconst cancelClick = debounce(\n  async () => {\n    try {\n      await cancelOrder(orderId.value)\n      location.reload()\n    } catch (error: any) {\n      console.error(error)\n      if (error?.code == '4') {\n        return toLogin()\n      } else {\n        Toast(error?.msg || '网络错误')\n      }\n    }\n  },\n  3000,\n  {\n    leading: true,\n    trailing: false\n  }\n)\nconst payClick = () => {\n  orderDtail.value &&\n    jumpToCashier({\n      orderId: orderDtail.value.orderId,\n      partnerId: '3006',\n      payOrderId: orderDtail.value.orderId,\n      state: '1'\n    })\n}\nconst refundDetailClick = () => {\n  location.href = `/hzwdemo3/refund-detail?orderId=${orderId.value}&kwtarget=blank`\n}\n</script>\n<style lang=\"scss\" scoped>\n.order-detail {\n  .order-bg {\n    overflow: hidden;\n    padding-bottom: 84px;\n    margin-bottom: -64px;\n    background: linear-gradient(122deg, #ff2424 0%, #ff387a 95%);\n    .order-nav {\n      position: fixed;\n      left: 0;\n      width: 100%;\n      display: flex;\n      align-items: center;\n      padding: 0 12px;\n      .nav-back {\n        flex: none;\n        width: 22px;\n        height: 22px;\n        background: url(@/assets/images/order-detail/icon-back.png) 0 0/100%\n          100% no-repeat;\n      }\n    }\n    .order-status {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: 20px;\n      color: #ffffff;\n      line-height: 24px;\n      margin-bottom: 11px;\n      i {\n        width: 24px;\n        height: 24px;\n        margin-right: 6px;\n        background-size: 100% 100%;\n        background-repeat: no-repeat;\n        background-position: 0 0;\n      }\n    }\n    .order-text {\n      font-size: 13px;\n      color: #ffffff;\n      line-height: 16px;\n      margin-bottom: 8px;\n      text-align: center;\n    }\n    .order-refund-detail {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 80px;\n      height: 22px;\n      border: 0.75px solid #ffffff;\n      border-radius: 10.5px;\n      font-size: 13px;\n      color: #ffffff;\n      line-height: 16px;\n      margin: 0 auto;\n      i {\n        margin-left: 2px;\n        width: 10px;\n        height: 10px;\n        background: url(@/assets/images/order-detail/icon-more.png) 0 0/100%\n          100% no-repeat;\n      }\n    }\n    & > *:last-child {\n      margin-bottom: 0;\n    }\n  }\n  .order-detail-wrap {\n    padding: 0 12px 50px;\n\n    .product-comp {\n      margin-bottom: 10px;\n    }\n    section {\n      border-radius: 8px;\n      padding: 0 12px 16px;\n      background: #ffffff;\n      overflow: hidden;\n      margin-bottom: 10px;\n      h2.section-title {\n        padding: 16px 0 12px;\n        font-size: 15px;\n        color: #121212;\n        line-height: 18px;\n      }\n      ul.table-list {\n        li.table-item {\n          display: flex;\n          flex-wrap: nowrap;\n          justify-content: space-between;\n          align-items: center;\n          min-height: 16px;\n          margin-bottom: 12px;\n          &:last-of-type {\n            margin-bottom: 0;\n          }\n          &.coupon {\n            align-items: flex-start;\n            .value {\n              color: #ff397e;\n              line-height: 22px;\n            }\n          }\n          .name {\n            flex: none;\n            font-size: 13px;\n            color: #262626;\n            line-height: 16px;\n          }\n          .value {\n            flex: 1;\n            text-align: right;\n            font-size: 13px;\n            color: #262626;\n            line-height: 16px;\n            .big {\n              font-size: 16px;\n              vertical-align: baseline;\n            }\n          }\n        }\n        p.coin-tip {\n          margin-top: 5px;\n          font-size: 11px;\n          color: #999999;\n          line-height: 14px;\n        }\n        p.promotion-tip {\n          width: 100%;\n          color: #ff397e;\n          font-size: 11px;\n          margin-top: 5px;\n          line-height: 1.3;\n          text-decoration-line: underline;\n\n          span {\n            width: 12px;\n            min-width: 12px;\n            display: inline-block;\n            height: 12px;\n            transform: translateY(2px);\n            background: url(@/assets/images/order-detail/icon_question.png)\n              no-repeat;\n            background-position: center;\n            background-size: 100% 100%;\n            margin-left: 5px;\n          }\n        }\n        p.promotion-tip.has-return {\n          text-decoration-line: none;\n          color: #999999;\n          span {\n            display: none;\n          }\n        }\n      }\n      ul.table-list ~ .dividle {\n        margin: 16px 0;\n        height: 1px;\n        background: #ededed;\n      }\n    }\n  }\n  .order-detail-action {\n    position: fixed;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    padding: 10px 12px;\n    background: #ffffff;\n    border-top: 1px solid #f0f0f0;\n    .action-wrap {\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      button {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 72px;\n        height: 30px;\n        border-radius: 15px;\n        font-size: 12px;\n        line-height: 15px;\n      }\n      button.cancel-button {\n        border: 1px solid #999999;\n        color: #2a2a2a;\n        margin-right: 10px;\n      }\n      button.pay-button {\n        background: linear-gradient(90deg, #ff397e, #ff074c);\n        color: #ffffff;\n      }\n    }\n  }\n}\n\n:deep(.van-popup) {\n  border-radius: 14px;\n  .van-dialog__header {\n    margin-top: 20px;\n    color: #262626;\n    font-weight: 600;\n    font-size: 16px;\n    text-align: center;\n  }\n  .van-dialog__footer {\n    height: 44px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #ff397e;\n    font-weight: 600;\n    font-size: 16px;\n  }\n  .van-button__text {\n    display: block;\n    height: 44px;\n    line-height: 44px;\n    width: 300px;\n  }\n}\n.dialog-container {\n  width: 280px;\n  color: #666666;\n  pad: 20px;\n  max-height: 300px;\n  overflow-y: scroll;\n  line-height: normal;\n  font-family: PingFang SC;\n  font-size: 14px;\n  padding-bottom: 25px;\n  p {\n    margin: 20px 20px 10px;\n  }\n  span {\n    display: block;\n    margin: 0 20px;\n  }\n}\n</style>\n"],"names":["useHeight","element","withSafeArea","height","ref","setHeight","useRect","onMounted","nextTick","i","onPopupReopen","usePlaceholder","contentRef","bem","renderContent","_createVNode","name","createNamespace","ACTION_BAR_KEY","actionBarProps","truthProp","stdin_default","defineComponent","props","slots","root","renderPlaceholder","linkChildren","useChildren","renderActionBar","_a","ActionBar","withInstall","_ActionBar","buttonProps","extend","routeProps","makeStringProp","numericProp","emit","route","useRoute","renderLoadingIcon","Loading","renderIcon","Icon","renderText","text","getStyle","color","plain","style","onClick","event","preventDefault","tag","type","size","block","round","square","loading","disabled","hairline","nativeType","iconPosition","classes","BORDER_SURROUND","Button","_Button","actionBarButtonProps","parent","index","useParent","isFirst","computed","prev","isLast","next","useExpose","icon","ActionBarButton","_ActionBarButton","t","dialogProps","popupSharedProps","unknownProp","popupInheritKeys","popupSharedPropKeys","reactive","updateShow","value","close","action","getActionHandler","callInterceptor","onCancel","onConfirm","onKeydown","withKeys","_b","noop","renderTitle","title","renderMessage","hasTitle","message","allowHtml","messageAlign","classNames","content","isFunction","renderButtons","BORDER_TOP","BORDER_LEFT","renderRoundButtons","renderFooter","width","theme","className","Popup","_mergeProps","addUnit","pick","instance","initInstance","mountComponent","state","toggle","usePopupState","VanDialog","Dialog","options","inBrowser","resolve","reject","app","setPage","isFullscreen","naviType","isApp","barHeight","navHeight","rem2RealPx","returnCoinNumTitle","returnCoins","orderId","orderDtail","orderPayCountDown","orderPayCountDownInterval","orderStatus","getOrderStatus","orderPayed","productInfo","returnCoupons","show","showTrips","__async","queryOrderDetail","error","toLogin","Toast","OrderState","finished","calcOrderPayCountDown","trackView","nowMoment","moment","expireMoment","diff","diffMinutes","diffSeconds","backClick","productClick","copyClick","copyTextClipboard","cancelClick","debounce","cancelOrder","payClick","jumpToCashier","refundDetailClick"],"mappings":"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"}