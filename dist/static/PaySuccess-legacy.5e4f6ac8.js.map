{"version":3,"file":"PaySuccess-legacy.5e4f6ac8.js","sources":["../../src/views/pay-success/PaySuccess.vue"],"sourcesContent":["<template>\n  <div class=\"pay-success\">\n    <i class=\"success-icon\"></i>\n    <h1 class=\"success-text pf-medium\">订单支付成功</h1>\n    <h2 class=\"success-tip\">童玩币已充值到账</h2>\n    <div class=\"buttons\">\n      <button class=\"view-button\" @click=\"viewClick\">查看订单</button>\n      <button class=\"use-button\" @click=\"useClick\">立即使用</button>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { setPage, toLogin, trackClick, trackView } from '@/utils'\nimport { onMounted, ref } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { queryOrderDetail } from '@/api/order'\nimport { isArray, find } from 'lodash'\nimport { Toast } from 'vant'\nconst route = useRoute()\n\nsetPage({\n  title: '支付成功',\n  share: false\n})\n\nconst orderId = ref(<string>route.query.orderId)\nconst deviceCode = ref('')\nconst cashPay = ref(0) //是否现金支付\n\nconst viewClick = () => {\n  location.href = `/hzwdemo3/order-detail/${orderId.value}?naviType=4&kwtarget=blank`\n  trackClick({\n    bizType: '127',\n    pageLevelId: '121013558',\n    clickId: '200001'\n  })\n}\n\nconst useClick = () => {\n  Toast('模拟跳转二维码核销页面')\n  trackClick({\n    bizType: '127',\n    pageLevelId: '121013558',\n    clickId: '200002'\n  })\n}\n\ntrackView({\n  bizType: '127',\n  pageLevelId: '121013558',\n  pageParam: { orderid: orderId.value }\n})\n\nonMounted(async () => {\n  try {\n    const result: any = await queryOrderDetail(orderId.value)\n    if (result) {\n      cashPay.value = +result.orderSource === 13 ? 1 : 0\n      if (result.extInfoList && isArray(result.extInfoList)) {\n        const val = find(\n          result.extInfoList,\n          item => 'deviceCode' === item.labelKey\n        )\n        if (val) {\n          deviceCode.value = val.labelValue\n        }\n      }\n    }\n  } catch (error: any) {\n    console.error(error)\n    if (error?.code == '4') {\n      return toLogin()\n    } else {\n      Toast(error?.msg || '网络错误')\n    }\n  }\n})\n</script>\n<style lang=\"scss\" scoped>\n.pay-success {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  background: #ffffff;\n  height: 321px;\n  .success-icon {\n    width: 94px;\n    height: 94.5px;\n    background: url(@/assets/images/pay-success/icon-success.png) 0 0/100% 100%\n      no-repeat;\n    margin-bottom: 12px;\n  }\n  .success-text {\n    font-size: 20px;\n    color: #262626;\n    line-height: 24px;\n    margin-bottom: 10px;\n  }\n  .success-tip {\n    font-size: 15px;\n    color: #666666;\n    line-height: 21px;\n    margin-bottom: 30px;\n  }\n  .buttons {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    button {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 120px;\n      height: 40px;\n      border-radius: 20.5px;\n      font-size: 14px;\n      line-height: 16px;\n    }\n    button.view-button {\n      border: 1px solid #999999;\n      color: #2a2a2a;\n      margin-right: 24px;\n    }\n    button.use-button {\n      background: linear-gradient(90deg, #ff397e, #ff074c);\n      color: #ffffff;\n    }\n  }\n}\n</style>\n"],"names":["route","useRoute","setPage","title","share","orderId","ref","query","deviceCode","cashPay","viewClick","location","href","value","trackClick","bizType","pageLevelId","clickId","useClick","Toast","trackView","pageParam","orderid","onMounted","async","result","queryOrderDetail","orderSource","extInfoList","isArray","exports","val","find","item","labelKey","labelValue","error","console","code","toLogin","msg"],"mappings":"qsFAkBA,MAAAA,EAAAC,IAEAC,EAAA,CAAQC,MAAA,OACCC,OAAA,IAIT,MAAAC,EAAAC,EAAAN,EAAAO,MAAAF,SACAG,EAAAF,EAAA,IACAG,EAAAH,EAAA,GAEAI,EAAAA,KACEC,SAAAC,KAAA,0BAAAP,EAAAQ,kCACAC,EAAA,CAAWC,QAAA,MACAC,YAAA,YACIC,QAAA,YAKjBC,EAAAA,KACEC,EAAA,eACAL,EAAA,CAAWC,QAAA,MACAC,YAAA,YACIC,QAAA,mBAKjBG,EAAA,CAAUL,QAAA,MACCC,YAAA,YACIK,UAAA,CAAAC,QAAAjB,EAAAQ,SAIfU,GAAAC,UACE,IACE,MAAAC,QAAAC,EAAArB,EAAAQ,OACA,GAAAY,IACEhB,EAAAI,MAAA,KAAAY,EAAAE,YAAA,EAAA,EACAF,EAAAG,aAAAC,EAAAC,QAAAD,QAAAJ,EAAAG,cAAA,CACE,MAAAG,EAAAC,EAAAF,QAAAE,KAAYP,EAAAG,aACHK,GAAA,eAAAA,EAAAC,WAGTH,IACEvB,EAAAK,MAAAkB,EAAAI,aAGN,MAAAC,GAGA,GADAC,QAAAD,MAAAA,GACA,KAAAA,GAAAE,KACE,OAAAC,IAEApB,EAAAiB,GAAAI,KAAA"}